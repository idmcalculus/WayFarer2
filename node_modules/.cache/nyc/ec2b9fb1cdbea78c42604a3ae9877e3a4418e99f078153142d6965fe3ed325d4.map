{"version":3,"sources":["trips.js"],"names":["trips","createTrip","req","res","body","token","user_id","is_admin","bus_id","origin","destination","fare","pool","query","then","result","send","status","data","trip_id","rows","id","trip_date","err","error","getTrips","updateTrips","tripId","params","message"],"mappings":";;;;;;;AAAA;;;;AAEA,IAAMA,KAAK,GAAG;AACVC,EAAAA,UAAU,EAAE,oBAACC,GAAD,EAAMC,GAAN,EAAc;AAAA,oBASjBD,GAAG,CAACE,IATa;AAAA,QAElBC,KAFkB,aAElBA,KAFkB;AAAA,QAGlBC,OAHkB,aAGlBA,OAHkB;AAAA,QAIlBC,QAJkB,aAIlBA,QAJkB;AAAA,QAKlBC,MALkB,aAKlBA,MALkB;AAAA,QAMlBC,MANkB,aAMlBA,MANkB;AAAA,QAOlBC,WAPkB,aAOlBA,WAPkB;AAAA,QAQlBC,IARkB,aAQlBA,IARkB;;AAW1BC,qBAAKC,KAAL,4GAIA,CAACL,MAAD,EAASC,MAAT,EAAiBC,WAAjB,EAA8BC,IAA9B,CAJA,EAKCG,IALD,CAKM,UAACC,MAAD,EAAY;AACdZ,MAAAA,GAAG,CAACa,IAAJ,CAAS;AACLC,QAAAA,MAAM,EAAE,SADH;AAELC,QAAAA,IAAI,EAAE;AACFC,UAAAA,OAAO,EAAEJ,MAAM,CAACK,IAAP,CAAY,CAAZ,EAAeC,EADtB;AAEFb,UAAAA,MAAM,EAAEO,MAAM,CAACK,IAAP,CAAY,CAAZ,EAAeZ,MAFrB;AAGFC,UAAAA,MAAM,EAAEM,MAAM,CAACK,IAAP,CAAY,CAAZ,EAAeX,MAHrB;AAIFC,UAAAA,WAAW,EAAEK,MAAM,CAACK,IAAP,CAAY,CAAZ,EAAeV,WAJ1B;AAKFY,UAAAA,SAAS,EAAEP,MAAM,CAACK,IAAP,CAAY,CAAZ,EAAeE,SALxB;AAMFX,UAAAA,IAAI,EAAEI,MAAM,CAACK,IAAP,CAAY,CAAZ,EAAeT;AANnB;AAFD,OAAT;AAWH,KAjBD,WAkBO,UAACY,GAAD,EAAS;AACZpB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AACjBC,QAAAA,MAAM,EAAE,OADS;AAEjBO,QAAAA,KAAK,EAAE;AAFU,OAArB;AAIH,KAvBD;AAyBC,GArCS;AAsCVC,EAAAA,QAAQ,EAAE,kBAACvB,GAAD,EAAMC,GAAN,EAAc;AACpBS,qBAAKC,KAAL,yBACCC,IADD,CACM,UAACC,MAAD,EAAY;AACdZ,MAAAA,GAAG,CAACa,IAAJ,CAAS;AACLC,QAAAA,MAAM,EAAE,SADH;AAELC,QAAAA,IAAI,EAAEH,MAAM,CAACK;AAFR,OAAT;AAIH,KAND,WAOO,UAACG,GAAD,EAAS;AACZpB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AACrBC,QAAAA,MAAM,EAAE,OADa;AAErBO,QAAAA,KAAK,EAAE;AAFc,OAArB;AAIP,KAZG;AAaH,GApDS;AAqDVE,EAAAA,WAAW,EAAE,qBAACxB,GAAD,EAAMC,GAAN,EAAc;AAEvB,QAAMwB,MAAM,GAAGzB,GAAG,CAAC0B,MAAJ,CAAWD,MAA1B;;AACAf,qBAAKC,KAAL,kFAGA,CAAC,QAAD,EAAWc,MAAX,CAHA,EAKCb,IALD,CAKM,UAACC,MAAD,EAAY;AACdZ,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AACjBC,QAAAA,MAAM,EAAE,SADS;AAEjBC,QAAAA,IAAI,EAAE;AACFW,UAAAA,OAAO,EAAE;AADP;AAFW,OAArB;AAMH,KAZD,WAaO,UAACN,GAAD,EAAS;AACZpB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AACjBC,QAAAA,MAAM,EAAE,OADS;AAEjBO,QAAAA,KAAK,EAAE;AAFU,OAArB;AAIH,KAlBD;AAoBH;AA5ES,CAAd;eA8EexB,K","sourceRoot":"C:\\Users\\idmca\\Desktop\\Andela\\way_farer\\server\\controllers","sourcesContent":["import pool from \"../models/pool\";\r\n\r\nconst trips = {\r\n    createTrip: (req, res) => {\r\n        const { \r\n            token,\r\n            user_id,\r\n            is_admin,\r\n            bus_id,\r\n            origin,\r\n            destination,\r\n            fare,\r\n         } = req.body;\r\n       \r\n    pool.query(`INSERT INTO \r\n    trips(bus_id, origin, destination, fare)\r\n    VALUES($1, $2, $3, $4)\r\n    RETURNING *`,\r\n    [bus_id, origin, destination, fare])\r\n    .then((result) => {\r\n        res.send({\r\n            status: \"success\",\r\n            data: {\r\n                trip_id: result.rows[0].id,\r\n                bus_id: result.rows[0].bus_id,\r\n                origin: result.rows[0].origin,\r\n                destination: result.rows[0].destination,\r\n                trip_date: result.rows[0].trip_date,\r\n                fare: result.rows[0].fare,\r\n            }\r\n        });\r\n    })\r\n    .catch((err) => {\r\n        res.status(500).send({\r\n            status: \"error\",\r\n            error: \"internal server error\"\r\n        });\r\n    });\r\n    \r\n    },\r\n    getTrips: (req, res) => {\r\n        pool.query(`SELECT * FROM trips;`)\r\n        .then((result) => {\r\n            res.send({\r\n                status: \"success\",\r\n                data: result.rows,\r\n            });\r\n        })\r\n        .catch((err) => {\r\n            res.status(500).send({\r\n            status: \"error\",\r\n            error: \"internal server error\"\r\n        });\r\n    });\r\n    },\r\n    updateTrips: (req, res) => {\r\n       \r\n        const tripId = req.params.tripId;\r\n        pool.query(`\r\n        UPDATE trips SET status = ($1) WHERE id = ($2)\r\n        RETURNING *`,\r\n        [\"cancel\", tripId],\r\n        )\r\n        .then((result) => {\r\n            res.status(201).send({\r\n                status: \"success\",\r\n                data: {\r\n                    message: \"Trip cancelled succesfully\",\r\n                },\r\n            })\r\n        })\r\n        .catch((err) => {\r\n            res.status(500).send({\r\n                status: \"error\",\r\n                error: \"internal server error\"\r\n            });\r\n        });\r\n\r\n    }\r\n};\r\nexport default trips;"]}