"use strict";var cov_pwiib8v26=function(){var path="C:\\Users\\idmca\\Desktop\\Andela\\way_farer\\server\\controllers\\trips.js";var hash="6f20d316a1da1ba2b1463b63f1dd1b3c9ed55f54";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\idmca\\Desktop\\Andela\\way_farer\\server\\controllers\\trips.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:28}},"2":{start:{line:8,column:12},end:{line:8,column:61}},"3":{start:{line:10,column:39},end:{line:10,column:95}},"4":{start:{line:12,column:12},end:{line:72,column:1}},"5":{start:{line:14,column:20},end:{line:14,column:28}},"6":{start:{line:15,column:16},end:{line:15,column:31}},"7":{start:{line:16,column:18},end:{line:16,column:35}},"8":{start:{line:17,column:19},end:{line:17,column:37}},"9":{start:{line:18,column:17},end:{line:18,column:33}},"10":{start:{line:19,column:17},end:{line:19,column:33}},"11":{start:{line:20,column:22},end:{line:20,column:43}},"12":{start:{line:21,column:15},end:{line:21,column:29}},"13":{start:{line:23,column:4},end:{line:40,column:7}},"14":{start:{line:24,column:6},end:{line:34,column:9}},"15":{start:{line:36,column:6},end:{line:39,column:9}},"16":{start:{line:43,column:4},end:{line:53,column:7}},"17":{start:{line:44,column:6},end:{line:47,column:9}},"18":{start:{line:49,column:6},end:{line:52,column:9}},"19":{start:{line:56,column:17},end:{line:56,column:34}},"20":{start:{line:58,column:4},end:{line:70,column:7}},"21":{start:{line:59,column:6},end:{line:64,column:9}},"22":{start:{line:66,column:6},end:{line:69,column:9}},"23":{start:{line:73,column:15},end:{line:73,column:20}},"24":{start:{line:74,column:0},end:{line:74,column:30}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:10,column:9},end:{line:10,column:31}},loc:{start:{line:10,column:37},end:{line:10,column:97}},line:10},"1":{name:"createTrip",decl:{start:{line:13,column:23},end:{line:13,column:33}},loc:{start:{line:13,column:44},end:{line:41,column:3}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:176},end:{line:23,column:177}},loc:{start:{line:23,column:194},end:{line:35,column:5}},line:23},"3":{name:"(anonymous_3)",decl:{start:{line:35,column:16},end:{line:35,column:17}},loc:{start:{line:35,column:31},end:{line:40,column:5}},line:35},"4":{name:"getTrips",decl:{start:{line:42,column:21},end:{line:42,column:29}},loc:{start:{line:42,column:40},end:{line:54,column:3}},line:42},"5":{name:"(anonymous_5)",decl:{start:{line:43,column:56},end:{line:43,column:57}},loc:{start:{line:43,column:74},end:{line:48,column:5}},line:43},"6":{name:"(anonymous_6)",decl:{start:{line:48,column:16},end:{line:48,column:17}},loc:{start:{line:48,column:31},end:{line:53,column:5}},line:48},"7":{name:"updateTrips",decl:{start:{line:55,column:24},end:{line:55,column:35}},loc:{start:{line:55,column:46},end:{line:71,column:3}},line:55},"8":{name:"(anonymous_8)",decl:{start:{line:58,column:133},end:{line:58,column:134}},loc:{start:{line:58,column:151},end:{line:65,column:5}},line:58},"9":{name:"(anonymous_9)",decl:{start:{line:65,column:16},end:{line:65,column:17}},loc:{start:{line:65,column:31},end:{line:70,column:5}},line:65}},branchMap:{"0":{loc:{start:{line:10,column:46},end:{line:10,column:94}},type:"cond-expr",locations:[{start:{line:10,column:70},end:{line:10,column:73}},{start:{line:10,column:76},end:{line:10,column:94}}],line:10},"1":{loc:{start:{line:10,column:46},end:{line:10,column:67}},type:"binary-expr",locations:[{start:{line:10,column:46},end:{line:10,column:49}},{start:{line:10,column:53},end:{line:10,column:67}}],line:10}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"6f20d316a1da1ba2b1463b63f1dd1b3c9ed55f54"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_pwiib8v26.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_pwiib8v26.s[1]++;exports["default"]=void 0;var _pool=(cov_pwiib8v26.s[2]++,_interopRequireDefault(require("../models/pool")));function _interopRequireDefault(obj){cov_pwiib8v26.f[0]++;cov_pwiib8v26.s[3]++;return(cov_pwiib8v26.b[1][0]++,obj)&&(cov_pwiib8v26.b[1][1]++,obj.__esModule)?(cov_pwiib8v26.b[0][0]++,obj):(cov_pwiib8v26.b[0][1]++,{"default":obj});}var trips=(cov_pwiib8v26.s[4]++,{createTrip:function createTrip(req,res){cov_pwiib8v26.f[1]++;var _req$body=(cov_pwiib8v26.s[5]++,req.body),token=(cov_pwiib8v26.s[6]++,_req$body.token),user_id=(cov_pwiib8v26.s[7]++,_req$body.user_id),is_admin=(cov_pwiib8v26.s[8]++,_req$body.is_admin),bus_id=(cov_pwiib8v26.s[9]++,_req$body.bus_id),origin=(cov_pwiib8v26.s[10]++,_req$body.origin),destination=(cov_pwiib8v26.s[11]++,_req$body.destination),fare=(cov_pwiib8v26.s[12]++,_req$body.fare);cov_pwiib8v26.s[13]++;_pool["default"].query("INSERT INTO \n    trips(bus_id, origin, destination, fare)\n    VALUES($1, $2, $3, $4)\n    RETURNING *",[bus_id,origin,destination,fare]).then(function(result){cov_pwiib8v26.f[2]++;cov_pwiib8v26.s[14]++;res.send({status:"success",data:{trip_id:result.rows[0].id,bus_id:result.rows[0].bus_id,origin:result.rows[0].origin,destination:result.rows[0].destination,trip_date:result.rows[0].trip_date,fare:result.rows[0].fare}});})["catch"](function(err){cov_pwiib8v26.f[3]++;cov_pwiib8v26.s[15]++;res.status(500).send({status:"error",error:"internal server error"});});},getTrips:function getTrips(req,res){cov_pwiib8v26.f[4]++;cov_pwiib8v26.s[16]++;_pool["default"].query("SELECT * FROM trips;").then(function(result){cov_pwiib8v26.f[5]++;cov_pwiib8v26.s[17]++;res.send({status:"success",data:result.rows});})["catch"](function(err){cov_pwiib8v26.f[6]++;cov_pwiib8v26.s[18]++;res.status(500).send({status:"error",error:"internal server error"});});},updateTrips:function updateTrips(req,res){cov_pwiib8v26.f[7]++;var tripId=(cov_pwiib8v26.s[19]++,req.params.tripId);cov_pwiib8v26.s[20]++;_pool["default"].query("\n        UPDATE trips SET status = ($1) WHERE id = ($2)\n        RETURNING *",["cancel",tripId]).then(function(result){cov_pwiib8v26.f[8]++;cov_pwiib8v26.s[21]++;res.status(201).send({status:"success",data:{message:"Trip cancelled succesfully"}});})["catch"](function(err){cov_pwiib8v26.f[9]++;cov_pwiib8v26.s[22]++;res.status(500).send({status:"error",error:"internal server error"});});}});var _default=(cov_pwiib8v26.s[23]++,trips);cov_pwiib8v26.s[24]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyaXBzLmpzIl0sIm5hbWVzIjpbInRyaXBzIiwiY3JlYXRlVHJpcCIsInJlcSIsInJlcyIsImJvZHkiLCJ0b2tlbiIsInVzZXJfaWQiLCJpc19hZG1pbiIsImJ1c19pZCIsIm9yaWdpbiIsImRlc3RpbmF0aW9uIiwiZmFyZSIsInBvb2wiLCJxdWVyeSIsInRoZW4iLCJyZXN1bHQiLCJzZW5kIiwic3RhdHVzIiwiZGF0YSIsInRyaXBfaWQiLCJyb3dzIiwiaWQiLCJ0cmlwX2RhdGUiLCJlcnIiLCJlcnJvciIsImdldFRyaXBzIiwidXBkYXRlVHJpcHMiLCJ0cmlwSWQiLCJwYXJhbXMiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxJQUFNQSxLQUFLLEdBQUc7QUFDVkMsRUFBQUEsVUFBVSxFQUFFLG9CQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUFBLG9CQVNqQkQsR0FBRyxDQUFDRSxJQVRhO0FBQUEsUUFFbEJDLEtBRmtCLGFBRWxCQSxLQUZrQjtBQUFBLFFBR2xCQyxPQUhrQixhQUdsQkEsT0FIa0I7QUFBQSxRQUlsQkMsUUFKa0IsYUFJbEJBLFFBSmtCO0FBQUEsUUFLbEJDLE1BTGtCLGFBS2xCQSxNQUxrQjtBQUFBLFFBTWxCQyxNQU5rQixhQU1sQkEsTUFOa0I7QUFBQSxRQU9sQkMsV0FQa0IsYUFPbEJBLFdBUGtCO0FBQUEsUUFRbEJDLElBUmtCLGFBUWxCQSxJQVJrQjs7QUFXMUJDLHFCQUFLQyxLQUFMLDRHQUlBLENBQUNMLE1BQUQsRUFBU0MsTUFBVCxFQUFpQkMsV0FBakIsRUFBOEJDLElBQTlCLENBSkEsRUFLQ0csSUFMRCxDQUtNLFVBQUNDLE1BQUQsRUFBWTtBQUNkWixNQUFBQSxHQUFHLENBQUNhLElBQUosQ0FBUztBQUNMQyxRQUFBQSxNQUFNLEVBQUUsU0FESDtBQUVMQyxRQUFBQSxJQUFJLEVBQUU7QUFDRkMsVUFBQUEsT0FBTyxFQUFFSixNQUFNLENBQUNLLElBQVAsQ0FBWSxDQUFaLEVBQWVDLEVBRHRCO0FBRUZiLFVBQUFBLE1BQU0sRUFBRU8sTUFBTSxDQUFDSyxJQUFQLENBQVksQ0FBWixFQUFlWixNQUZyQjtBQUdGQyxVQUFBQSxNQUFNLEVBQUVNLE1BQU0sQ0FBQ0ssSUFBUCxDQUFZLENBQVosRUFBZVgsTUFIckI7QUFJRkMsVUFBQUEsV0FBVyxFQUFFSyxNQUFNLENBQUNLLElBQVAsQ0FBWSxDQUFaLEVBQWVWLFdBSjFCO0FBS0ZZLFVBQUFBLFNBQVMsRUFBRVAsTUFBTSxDQUFDSyxJQUFQLENBQVksQ0FBWixFQUFlRSxTQUx4QjtBQU1GWCxVQUFBQSxJQUFJLEVBQUVJLE1BQU0sQ0FBQ0ssSUFBUCxDQUFZLENBQVosRUFBZVQ7QUFObkI7QUFGRCxPQUFUO0FBV0gsS0FqQkQsV0FrQk8sVUFBQ1ksR0FBRCxFQUFTO0FBQ1pwQixNQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCRCxJQUFoQixDQUFxQjtBQUNqQkMsUUFBQUEsTUFBTSxFQUFFLE9BRFM7QUFFakJPLFFBQUFBLEtBQUssRUFBRTtBQUZVLE9BQXJCO0FBSUgsS0F2QkQ7QUF5QkMsR0FyQ1M7QUFzQ1ZDLEVBQUFBLFFBQVEsRUFBRSxrQkFBQ3ZCLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ3BCUyxxQkFBS0MsS0FBTCx5QkFDQ0MsSUFERCxDQUNNLFVBQUNDLE1BQUQsRUFBWTtBQUNkWixNQUFBQSxHQUFHLENBQUNhLElBQUosQ0FBUztBQUNMQyxRQUFBQSxNQUFNLEVBQUUsU0FESDtBQUVMQyxRQUFBQSxJQUFJLEVBQUVILE1BQU0sQ0FBQ0s7QUFGUixPQUFUO0FBSUgsS0FORCxXQU9PLFVBQUNHLEdBQUQsRUFBUztBQUNacEIsTUFBQUEsR0FBRyxDQUFDYyxNQUFKLENBQVcsR0FBWCxFQUFnQkQsSUFBaEIsQ0FBcUI7QUFDckJDLFFBQUFBLE1BQU0sRUFBRSxPQURhO0FBRXJCTyxRQUFBQSxLQUFLLEVBQUU7QUFGYyxPQUFyQjtBQUlQLEtBWkc7QUFhSCxHQXBEUztBQXFEVkUsRUFBQUEsV0FBVyxFQUFFLHFCQUFDeEIsR0FBRCxFQUFNQyxHQUFOLEVBQWM7QUFFdkIsUUFBTXdCLE1BQU0sR0FBR3pCLEdBQUcsQ0FBQzBCLE1BQUosQ0FBV0QsTUFBMUI7O0FBQ0FmLHFCQUFLQyxLQUFMLGtGQUdBLENBQUMsUUFBRCxFQUFXYyxNQUFYLENBSEEsRUFLQ2IsSUFMRCxDQUtNLFVBQUNDLE1BQUQsRUFBWTtBQUNkWixNQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCRCxJQUFoQixDQUFxQjtBQUNqQkMsUUFBQUEsTUFBTSxFQUFFLFNBRFM7QUFFakJDLFFBQUFBLElBQUksRUFBRTtBQUNGVyxVQUFBQSxPQUFPLEVBQUU7QUFEUDtBQUZXLE9BQXJCO0FBTUgsS0FaRCxXQWFPLFVBQUNOLEdBQUQsRUFBUztBQUNacEIsTUFBQUEsR0FBRyxDQUFDYyxNQUFKLENBQVcsR0FBWCxFQUFnQkQsSUFBaEIsQ0FBcUI7QUFDakJDLFFBQUFBLE1BQU0sRUFBRSxPQURTO0FBRWpCTyxRQUFBQSxLQUFLLEVBQUU7QUFGVSxPQUFyQjtBQUlILEtBbEJEO0FBb0JIO0FBNUVTLENBQWQ7ZUE4RWV4QixLIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcaWRtY2FcXERlc2t0b3BcXEFuZGVsYVxcd2F5X2ZhcmVyXFxzZXJ2ZXJcXGNvbnRyb2xsZXJzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBvb2wgZnJvbSBcIi4uL21vZGVscy9wb29sXCI7XHJcblxyXG5jb25zdCB0cmlwcyA9IHtcclxuICAgIGNyZWF0ZVRyaXA6IChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgXHJcbiAgICAgICAgICAgIHRva2VuLFxyXG4gICAgICAgICAgICB1c2VyX2lkLFxyXG4gICAgICAgICAgICBpc19hZG1pbixcclxuICAgICAgICAgICAgYnVzX2lkLFxyXG4gICAgICAgICAgICBvcmlnaW4sXHJcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLFxyXG4gICAgICAgICAgICBmYXJlLFxyXG4gICAgICAgICB9ID0gcmVxLmJvZHk7XHJcbiAgICAgICBcclxuICAgIHBvb2wucXVlcnkoYElOU0VSVCBJTlRPIFxyXG4gICAgdHJpcHMoYnVzX2lkLCBvcmlnaW4sIGRlc3RpbmF0aW9uLCBmYXJlKVxyXG4gICAgVkFMVUVTKCQxLCAkMiwgJDMsICQ0KVxyXG4gICAgUkVUVVJOSU5HICpgLFxyXG4gICAgW2J1c19pZCwgb3JpZ2luLCBkZXN0aW5hdGlvbiwgZmFyZV0pXHJcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgcmVzLnNlbmQoe1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB0cmlwX2lkOiByZXN1bHQucm93c1swXS5pZCxcclxuICAgICAgICAgICAgICAgIGJ1c19pZDogcmVzdWx0LnJvd3NbMF0uYnVzX2lkLFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luOiByZXN1bHQucm93c1swXS5vcmlnaW4sXHJcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogcmVzdWx0LnJvd3NbMF0uZGVzdGluYXRpb24sXHJcbiAgICAgICAgICAgICAgICB0cmlwX2RhdGU6IHJlc3VsdC5yb3dzWzBdLnRyaXBfZGF0ZSxcclxuICAgICAgICAgICAgICAgIGZhcmU6IHJlc3VsdC5yb3dzWzBdLmZhcmUsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXHJcbiAgICAgICAgICAgIGVycm9yOiBcImludGVybmFsIHNlcnZlciBlcnJvclwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgfSxcclxuICAgIGdldFRyaXBzOiAocmVxLCByZXMpID0+IHtcclxuICAgICAgICBwb29sLnF1ZXJ5KGBTRUxFQ1QgKiBGUk9NIHRyaXBzO2ApXHJcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LnJvd3MsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcclxuICAgICAgICAgICAgZXJyb3I6IFwiaW50ZXJuYWwgc2VydmVyIGVycm9yXCJcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZVRyaXBzOiAocmVxLCByZXMpID0+IHtcclxuICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRyaXBJZCA9IHJlcS5wYXJhbXMudHJpcElkO1xyXG4gICAgICAgIHBvb2wucXVlcnkoYFxyXG4gICAgICAgIFVQREFURSB0cmlwcyBTRVQgc3RhdHVzID0gKCQxKSBXSEVSRSBpZCA9ICgkMilcclxuICAgICAgICBSRVRVUk5JTkcgKmAsXHJcbiAgICAgICAgW1wiY2FuY2VsXCIsIHRyaXBJZF0sXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRyaXAgY2FuY2VsbGVkIHN1Y2Nlc2Z1bGx5XCIsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IHRyaXBzOyJdfQ==